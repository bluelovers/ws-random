"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@lazy-random/expect"),e=require("@lazy-random/df-array");function i(t,e){return t+.001}function r(e,r){var l;let n=0;const s=null!==(l=null==r?void 0:r.getWeight)&&void 0!==l?l:i;let o=Object.entries(e).map((function(e){let[i,r]=e,l=s(r,i);return l=+l,t.expect(l).gt(0),n+=l,{key:i,value:r,weight:l,percentage:0}})),u=o.reduce((function(t,e){e.percentage=e.weight/n;let i=[e.key,e.value,e.percentage];return 0===t.last?t.last=e.percentage:t.last+=e.percentage,t.vlist.push(i),t.kwlist[e.key]=e.weight,t}),{vlist:[],kwlist:{},last:0});return t.expect(u.vlist).have.length.gt(1),{sum:n,list:o,kwlist:u.kwlist,vlist:u.vlist}}function l(t,i,r={}){return r.disableSort||(i.vlist=i.vlist.sort((function(t,e){return t[2]-e[2]}))),r.shuffle&&(i.vlist=e.dfArrayShuffle(t,i.vlist,!0)()),i}function n(t,e){let i=0;return e.plist=[],e.klist=e.vlist.reduce((function(t,r){let l=r[2];return 0===i?i=l:i+=l,t.push(i),e.plist.push(l),t}),[]),e}function s(t,e,i){let s=r(e,i);return s=l(t,s,i),s=n(0,s),s}function o(t,e){var i;let r;for(let i=0;i<e.length;i++)if(t<=e[i]){r=i;break}return null!==(i=r)&&void 0!==i?i:e.length-1}exports._calcWeight=s,exports._createWeight=r,exports._getWeight=i,exports._itemByWeightCore=o,exports._percentageWeight=n,exports._sortWeight=l,exports.dfItemByWeight=function(t,e,i){let r=s(t,e,i);const{vlist:l,klist:n}=r;return r=void 0,e=void 0,i=void 0,()=>l[o(t.next(),n)]},exports.dfItemByWeightUnique=function(e,i,s,u){let c=r(i,u);t.expect(s).integer.gt(1),t.expect(c.vlist).have.length.gte(s),c=n(0,l(e,c,u));const{vlist:v,klist:a}=c;c=void 0,i=void 0,u=void 0;const g=s-1;return()=>{const t=[],i={vlist:v.slice(),klist:a.slice()};for(let r=0;r<s;r++){let l=o(e.next(),i.klist);t.push(i.vlist[l]),r<g&&(i.vlist.splice(l,1),n(0,i))}return t}};
//# sourceMappingURL=index.cjs.production.min.cjs.map
